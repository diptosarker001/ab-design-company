<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AB Design CMS</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
      background: #f5f8fa;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }
    .container {
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      padding: 40px;
      max-width: 400px;
      width: 90%;
    }
    h1 {
      color: #2c3e50;
      font-size: 24px;
      margin-bottom: 20px;
      text-align: center;
    }
    .info-box {
      background: #e3f2fd;
      border-left: 4px solid #2196f3;
      padding: 15px;
      margin-bottom: 25px;
      font-size: 14px;
      border-radius: 4px;
    }
    .info-box a {
      color: #2196f3;
      font-weight: 600;
      text-decoration: none;
    }
    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #34495e;
    }
    input {
      width: 100%;
      padding: 12px;
      border: 2px solid #e0e7ec;
      border-radius: 6px;
      font-size: 14px;
      box-sizing: border-box;
      margin-bottom: 20px;
      transition: border 0.3s;
    }
    input:focus {
      border-color: #3498db;
      outline: none;
    }
    button {
      background: #2c3e50;
      color: white;
      border: none;
      border-radius: 6px;
      padding: 14px 20px;
      font-size: 16px;
      font-weight: 600;
      width: 100%;
      cursor: pointer;
      transition: background 0.3s;
    }
    button:hover {
      background: #1a252f;
    }
    .token-help {
      text-align: center;
      margin-top: 20px;
      font-size: 13px;
    }
    .token-help a {
      color: #3498db;
      text-decoration: none;
      font-weight: 600;
    }
    .loading {
      text-align: center;
      color: #7f8c8d;
      padding: 20px;
    }
    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3498db;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
  <div id="app">
    <!-- ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ (‡¶°‡¶ø‡¶´‡¶≤‡ßç‡¶ü) -->
    <div id="login-form-container">
      <div class="container">
        <h1>üé® AB Design CMS</h1>
        
        <div class="info-box">
          <strong>üîë GitHub Token ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</strong><br><br>
          Token ‡¶§‡ßà‡¶∞‡¶ø ‡¶ï‡¶∞‡¶§‡ßá <a href="https://github.com/settings/tokens/new?scopes=repo" target="_blank">‡¶è‡¶ñ‡¶æ‡¶®‡ßá ‡¶ï‡ßç‡¶≤‡¶ø‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</a> ‡¶è‡¶¨‡¶Ç <strong>repo</strong> permissions ‡¶¶‡¶ø‡¶®‡•§
        </div>
        
        <form id="login-form">
          <label for="token">GitHub Personal Access Token</label>
          <input type="password" id="token" placeholder="ghp_xxxxxxxxxxxx" required>
          
          <button type="submit">üöÄ ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</button>
        </form>
        
        <div class="token-help">
          <a href="https://github.com/settings/tokens" target="_blank">
            ‚ûï ‡¶Ü‡¶Æ‡¶æ‡¶∞ Tokens ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®
          </a>
        </div>
      </div>
    </div>

    <!-- ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç (‡¶≤‡¶ó‡¶á‡¶® ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ) -->
    <div id="loading-container" style="display: none;">
      <div class="container" style="text-align: center;">
        <h1>üé® AB Design CMS</h1>
        <div class="spinner"></div>
        <p class="loading">CMS ‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</p>
      </div>
    </div>

    <!-- CMS ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ -->
    <div id="cms-container" style="display: none;"></div>
  </div>

  <script>
    // ‡¶ö‡ßá‡¶ï ‡¶ï‡¶∞‡¶æ ‡¶Ø‡¶¶‡¶ø ‡¶á‡¶§‡¶ø‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá ‡¶≤‡¶ó‡¶á‡¶® ‡¶ï‡¶∞‡¶æ ‡¶•‡¶æ‡¶ï‡ßá
    const token = sessionStorage.getItem('github_token');
    
    if (token) {
      // ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø CMS ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
      showCMS(token);
    } else {
      // ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
      document.getElementById('login-form-container').style.display = 'block';
    }

    // ‡¶≤‡¶ó‡¶á‡¶® ‡¶´‡¶∞‡ßç‡¶Æ ‡¶∏‡¶æ‡¶¨‡¶Æ‡¶ø‡¶ü
    document.getElementById('login-form').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      const token = document.getElementById('token').value.trim();
      
      if (!token) {
        alert('‡¶¶‡¶Ø‡¶º‡¶æ ‡¶ï‡¶∞‡ßá Token ‡¶¶‡¶ø‡¶®');
        return;
      }
      
      // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
      document.getElementById('login-form-container').style.display = 'none';
      document.getElementById('loading-container').style.display = 'block';
      
      // Token ‡¶≠‡ßç‡¶Ø‡¶æ‡¶≤‡¶ø‡¶°‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ
      try {
        const response = await fetch('https://api.github.com/user', {
          headers: {
            'Authorization': `token ${token}`
          }
        });
        
        if (!response.ok) {
          throw new Error('Invalid token');
        }
        
        const user = await response.json();
        
        // Token ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶£ ‡¶ï‡¶∞‡¶æ
        sessionStorage.setItem('github_token', token);
        sessionStorage.setItem('github_user', JSON.stringify(user));
        
        // CMS ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
        showCMS(token);
        
      } catch (error) {
        alert('Token ‡¶≠‡ßÅ‡¶≤ ‡¶¨‡¶æ ‡¶Æ‡ßá‡¶Ø‡¶º‡¶æ‡¶¶‡ßã‡¶§‡ßç‡¶§‡ßÄ‡¶∞‡ßç‡¶£‡•§ ‡¶Ü‡¶¨‡¶æ‡¶∞ ‡¶ö‡ßá‡¶∑‡ßç‡¶ü‡¶æ ‡¶ï‡¶∞‡ßÅ‡¶®‡•§');
        document.getElementById('login-form-container').style.display = 'block';
        document.getElementById('loading-container').style.display = 'none';
      }
    });

    // CMS ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã‡¶∞ ‡¶´‡¶æ‡¶Ç‡¶∂‡¶®
    function showCMS(token) {
      // ‡¶≤‡ßã‡¶°‡¶ø‡¶Ç ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶≤‡ßÅ‡¶ï‡¶ø‡¶Ø‡¶º‡ßá CMS ‡¶ï‡¶®‡ßç‡¶ü‡ßá‡¶á‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®
      document.getElementById('loading-container').style.display = 'none';
      document.getElementById('cms-container').style.display = 'block';
      
      // ‡¶°‡¶ø‡¶ï‡ßç‡¶Ø‡¶æ‡¶™ CMS-‡¶è‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶ó‡ßç‡¶≤‡ßã‡¶¨‡¶æ‡¶≤ ‡¶≠‡ßá‡¶∞‡¶ø‡¶Ø‡¶º‡ßá‡¶¨‡¶≤ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
      window.CMS = window.CMS || {};
      window.CMS.init({
        config: {
          backend: {
            name: 'github',
            repo: 'diptosarker001/ab-design-company',
            branch: 'main',
            auth_type: 'implicit',
            auth_token: token  // ‡¶ü‡ßã‡¶ï‡ßá‡¶® ‡¶∏‡¶∞‡¶æ‡¶∏‡¶∞‡¶ø ‡¶™‡¶æ‡¶∏ ‡¶ï‡¶∞‡¶æ
          },
          media_folder: 'images',
          public_folder: '/images',
          collections: [
            {
              name: 'products',
              label: '‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡¶∏',
              folder: 'products',
              create: true,
              slug: '{{slug}}',
              fields: [
                { label: '‡¶™‡ßç‡¶∞‡ßã‡¶°‡¶æ‡¶ï‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ', name: 'title', widget: 'string', required: true },
                { label: '‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø', name: 'category', widget: 'select', options: ['‡¶≤‡ßã‡¶ó‡ßã', '‡¶∏‡ßã‡¶∂‡ßç‡¶Ø‡¶æ‡¶≤ ‡¶Æ‡¶ø‡¶°‡¶ø‡¶Ø‡¶º‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞', '‡¶™‡ßç‡¶∞‡¶ø‡¶®‡ßç‡¶ü‡ßá‡¶¨‡¶≤‡¶∏', '‡¶´‡ßç‡¶∞‡¶ø‡¶¨‡¶ø‡¶∏'], required: true },
                { label: '‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø (‡¶ü‡¶æ‡¶ï‡¶æ‡ßü)', name: 'price', widget: 'number', required: true },
                { label: '‡¶õ‡¶¨‡¶ø', name: 'image', widget: 'image', required: true },
                { label: '‡¶¨‡¶ø‡¶¨‡¶∞‡¶£', name: 'description', widget: 'text', required: true }
              ]
            }
          ]
        }
      });
      
      // CMS ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡¶ø‡¶™‡ßç‡¶ü ‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡¶æ
      const script = document.createElement('script');
      script.src = 'https://unpkg.com/decap-cms@^3.0.0/dist/decap-cms.js';
      script.onload = function() {
        console.log('CMS ‡¶≤‡ßã‡¶° ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
      };
      document.body.appendChild(script);
    }

    // ‡¶≤‡¶ó‡¶Ü‡¶â‡¶ü ‡¶´‡¶æ‡¶Ç‡¶∂‡¶® (‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ú‡¶®‡ßá)
    window.logout = function() {
      sessionStorage.removeItem('github_token');
      sessionStorage.removeItem('github_user');
      window.location.reload();
    };
  </script>
</body>
</html>
